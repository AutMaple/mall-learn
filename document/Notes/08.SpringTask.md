# SpringTask

## SpringTask 是什么？

SpringTask 是 Spring 自主研发的轻量级任务工具，相比于 Quartz 更加的方便，且不需要引入其他的依赖就可以使用

## Cron 表达式

Cron 表达式是一个字符串，包括 6~7 个时间元素，在 SpringTask 中可以用于指定任务的执行时间

### Cron 语法

```text
Seconds Minutes Hours DayOfMonth Month DayOfWeek
```

#### 每个时间元素的说明

| 时间元素       | 可出现的字符  | 有效的数值范围       |
|------------|---------|---------------|
| Seconds    | ,-*/    | 0-59          |
| Minutes    | ,-*/    | 0-59          |
| Hours      | ,-*/    | 0-23          |
| DayOfMonth | ,-*/?LW | 0-31          |
| Month      | ,-*/    | 1-12          |
| DayOfWeek  | ,-*/?L# | 1-7 或 SUN-SAT | 

#### Cron 格式中特殊元素的说明

| 字符  | 作用                                | 举例                                                |
|-----|-----------------------------------|---------------------------------------------------|
| ,   | 列举出枚举值                            | 在 Minutes 中使用 5,10, 表示在 5 分钟时触发一次，在 10 分钟时触发一次    |
| -   | 表示触发的范围                           | 在 Minutes 中使用 5-10，表示从 5 分钟到 10 分钟，每分钟都触发一次       |
| *   | 匹配任意值                             | 在 Minutes 中使用 *, 表示每分钟都触发一次事件                     |
| /   | 开始时间触发一次，然后每隔固定时间触发一次             | 在 Minutes 中使用 5/10，表示在 5 分钟时触发一次，然后每隔 10 分钟再触发一次  |
| ？   | 在 DayOfMonth 和 DayOfWeek 中用于匹配任意值 | 在 DayOfMonth 中使用 ？，表示每天都触发一次                      |
| #   | 在 DayOfWeek 中，确定第几个星期几            | 1#3 表示第三个星期日                                      |
| L   | 表示最后                              | 在 DayOfWeek 中使用 5L,表示最后一个星期四                      |
| W   | 表示有效的工作日(周一到周五)                   | 在 DayOfMonth 中使用 5W, 如果 5 号是星期六，则将在最近的工作日 4 号触发一次 |

## SpringTask 的业务场景介绍

用户对商品进行下单操作, 系统需要根据用户购买的商品信息，生成订单并锁定商品的库存。
系统需要设置一个用户允许支付的时间，例如 60 分钟，如果用户在允许支付的时间段内，没有支付，就需要取消订单并取消锁定商品的库存


